<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.3/dist/jquery.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
    <!-- <scrip src="effectiveness.js";></script> -->
    <title>Document</title>
    <script>
        'use strict';
        
        function checkID() {
            const id = myform.mid.value.trim();
            const idRegex = /^[a-z0-9_]{4,20}$/;

            if (!idRegex.test(id)) {
                alert("아이디는 영문 소문자, 숫자, 언더바(_)만 사용하여 4자 이상 20자 이하로 입력해주세요.");
                myform.mid.focus();
                return false;
            }
            return true;
        }
        
        function checkPWD() {
            const pwd =  document.getElementById("pwd").value.trim();
            const idRegex = /^(?=.*[a-zA-Z0-9__~!@#$%^&*()_+,./<>?[\]{}]).{4,20}$/

            if (!idRegex.test(pwd)) {
                alert("영문자, 숫자, _, 특수글자(~!@#$%^&*()_+,./<>?[]{})1자 이상 포함으로 4~20자 까지");
                myform.pwd.focus();
                return false;
            }
            return true;
        }

        function checkMAIL() {
            const mail =  document.getElementById("mail").value.trim();
            const idRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;

            if (!idRegex.test(mail)) {
                alert("이메일 형식을 다시 확인해주세요");
                myform.mail.focus();
                return false;
            }
            return true;
        }

        // 아이디 : /^[a-z0-9_]{4,20}$/;
        // 비밀번호 : /^[a-zA-Z0-9_~!@#$%^&*()_+,./<>?[]{}]/;
        // 닉네임 : /^[가-힣]/;
        // 성명 : /^[가=힣a-zA-Z]/;
        // 이메일 : /^[a-zA-Z0-9]@[a-zA-Z0-9]/;
        // 홈페이지주소 : /[https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#()?&//=]*)]/;
            //  --> 홈페이지 주소는 잘 모르겠어서 구글링으로 긁어왔습니다.
        // 전화번호 : /^[\d]{2,3}-[\d]{3,4}-[\d]{4}/;
        // 주민번호 : /^[0-9]{6}-[1-4]{1}[0-9]{6}/;

        function fCheck(){
            let mid = myform.mid.value.trim();
            let pwd = document.getElementById("pwd").value.trim();
            let pwd2 = document.getElementById("pwd2").value.trim();
            let mail = document.getElementById("mail").value.trim();
            let sug = document.getElementById("sug").value.trim();
        
            if(mid == "" ) {
                alert("아이디를 입력하세요!");
                myform.mid.focus();
                return false;
            }
            else if (checkID() == false) {
                myform.mid.focus();
                return false;
            }
            else if(pwd == "") {
                alert("비밀번호를 입력하세요!");
                myform.pwd.focus();
                return false;
            }
            else if(checkPWD() == false){
                myform.pwd.focus();
                return false;
            }
            else if(pwd != pwd2) {
                alert("비밀번호를 다시 확인해주세요!");
                myform.pwd2.focus();
                return false;
            }
            else if(mail == "") {
                alert("이메일을 입력하세요!");
                myform.mail.focus();
                return false;
            }
            else if(checkMAIL() == false){
                myform.mail.focus();
                return false;
            }
            else {
                myform.mid.value = mid;
                myform.pwd.value = pwd;
                myform.mail.value = mail;
                myform.sug.value = sug;
                myform.submit();
            }
        }
    </script>

    <style>
        th {
            text-align: center;
        }
        h2 {
            margin-top: 10%;
        }
    </style>
</head>
<body>
    <div class="container">
        <form name="myform" method="post" action="#">
            <h2 class="text-center">회 원 가 입</h2>
            <table class="table">
                <tr>
                    <th><label for="mid">아이디</label></th>
                    <td><input type="text" name="mid" id="mid" class="form-control"  autofocus required /></td>
                    <td></td>
                </tr>
                <tr>
                    
                </tr>
                <tr>
                    <th><label for="pwd">비밀번호</label></th>
                    <td><input type="password" name="pwd" id="pwd" class="form-control" required /></td>
                </tr>
                <tr>
                    <th><label for="pwd2">비밀번호확인</label></th>
                    <td><input type="password" name="pwd2" id="pwd2" class="form-control" required /></td>
                </tr>
                <tr>
                    <th><label for="mail">이메일</label></th>
                    <td><input type="text" name="mail" id="mail" class="form-control" placeholder="*계정 분실시 본인인증 정보로 활용합니다." required /></td>
                <tr>
                    <th><label for="sug">친구초대 추천 아이디</label></th>
                    <td><input type="text" name="sug" class="form-control" id="sug" /> </td>
                </tr>
                <tr>
                    <td colspan="2" class="text-center">
                        <div class="row">
                            <div class="col"></div>
                            <div class="col"><input type="button" value="완료" onclick="fCheck()"  class="form-control"></div>
                            <div class="col"><input type="reset" value="다시입력" class="form-control"></div>
                            <div class="col"></div>
                        </div>
                    </td>
                </tr>
            </table>
        </form>
        <div id="demo" class="text-center"></div>
    </div>
</body>
</html>